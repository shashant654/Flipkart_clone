{% extends 'base.html' %}
{% block title %} {{ category.name }} Products{%endblock %}
 {% block content %}
<div class="container py-5">
  <!-- Page Header -->
  <div class="text-center mb-5">
    <h1 class="display-5 fw-bold text-gradient-info mb-3">
      <i class="bi bi-bag-check-fill me-2"></i>{{ category.name }} Collection
    </h1>
    <p class="lead text-muted">
      Discover our premium selection of {{ category.name }}
    </p>
    <div class="divider mx-auto bg-info mb-4"></div>
  </div>

  <!-- Product Grid -->
  <div class="row g-4">
    {% for product in products %}
    <div class="col-lg-4 col-md-6">
      <div class="card h-100 border-0 rounded-4 overflow-hidden hover-lift">
        <!-- Product Image with Badge -->
        <div class="position-relative">
          <a href="{% url 'product_detail' product.id %}">
            <img
              src="{{ product.image.url }}"
              class="card-img-top product-image"
              alt="{{ product.name }}"
            />
          </a>

          {% if product.original_price > product.selling_price %}
          <span class="badge bg-danger position-absolute top-0 end-0 m-2">
            {{ product.discount_percentage }}% OFF
          </span>
          {% endif %}
        </div>

        <!-- Product Body -->
        <div class="card-body d-flex flex-column">
          <div class="mb-2">
            <h5 class="card-title fw-bold mb-1">{{ product.name }}</h5>
            <div class="d-flex align-items-center mb-2">
              <i class="bi bi-star-fill text-warning me-1"></i>
              <small class="text-muted">4.8 (120 reviews)</small>
            </div>
            <p class="card-text text-muted">
              {{ product.description|truncatechars:100 }}
            </p>
          </div>

          <!-- Price Section -->
          <div class="mt-auto">
            {% if product.original_price > product.selling_price %}
            <div class="d-flex align-items-center">
              <del class="text-muted me-2">₹{{ product.original_price }}</del>
              <span class="badge bg-danger-soft text-danger"
                >Save ₹{{ product.discount_amount }}</span
              >
            </div>
            {% endif %}
            <h4 class="text-success fw-bold my-2">
              ₹{{ product.selling_price }}
            </h4>

            <!-- Action Buttons -->
            <div class="d-grid gap-2 d-md-flex justify-content-md-between">
              <!-- Replace the View Details button with this -->
              <a
                href="{% url 'add_to_wishlist' product.id %}"
                class="btn btn-outline-info flex-grow-1 rounded-pill"
              >
                <i class="bi bi-heart me-1"></i> Add to Wishlist
              </a>
              <a
                href="{% url 'add_to_cart' product.id %}"
                class="btn btn-info flex-grow-1 rounded-pill text-white"
              >
                <i class="bi bi-cart-plus me-1"></i> Add to Cart
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% empty %}
    <div class="col-12 text-center py-5">
      <div class="alert alert-info rounded-4">
        <i class="bi bi-info-circle-fill me-2"></i>
        No products available in this category yet.
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<style>
  .bg-gradient-info {
    background: linear-gradient(135deg, #17a2b8, #1abc9c);
  }

  .text-gradient-info {
    background: linear-gradient(to right, #17a2b8, #1abc9c);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  .divider {
    width: 80px;
    height: 4px;
    opacity: 1;
  }

  .product-image {
    height: 250px;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .hover-lift {
    transition: all 0.3s ease;
  }

  .hover-lift:hover {
    transform: translateY(-5px);
    box-shadow: 0 1rem 2rem rgba(0, 0, 0, 0.1) !important;
  }

  .bg-danger-soft {
    background-color: rgba(220, 53, 69, 0.1);
  }

  .btn-info {
    background-color: #17a2b8;
    border-color: #17a2b8;
    transition: all 0.2s ease;
  }

  .btn-info:hover {
    background-color: #138496;
    border-color: #117a8b;
  }

  .btn-outline-info {
    color: #17a2b8;
    border-color: #17a2b8;
  }

  .btn-outline-info:hover {
    background-color: rgba(23, 162, 184, 0.1);
  }

  .rounded-pill {
    border-radius: 50rem !important;
  }

  .badge {
    font-weight: 500;
    padding: 0.35em 0.65em;
  }
</style>
{% endblock %}
